{
  "hash": "44a1403a16aa3edcee5e5ebc3f2ecf1a",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Asset Map Overview\"\nformat: html\nfig-responsive: false\n---\n\n\n# Purpose \nThe purpose of the code in this file is to reproduce the draft of the asset map digital display but with actual interactive qualities and mock data.\n\n# Libraries\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'plotly' was built under R version 4.3.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: ggplot2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'ggplot2' was built under R version 4.3.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'plotly'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:ggplot2':\n\n    last_plot\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:stats':\n\n    filter\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:graphics':\n\n    layout\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'htmlwidgets' was built under R version 4.3.2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'here' was built under R version 4.3.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nhere() starts at C:/Users/ebiek/OneDrive/MPH/Travis County Internship\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'dplyr'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nimg <- readPNG(here(\"high_level_map_draft.png\"))\nplot.new() \nrasterImage(img,0,0,1,1)\n```\n\n::: {.cell-output-display}\n![](asset_map_overview_visual_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n\ncoolors palette:\n<https://colorkit.co/color-palette-generator/003f5c-2c4875-58508d-8a508f-bc5090-de5a79-ff6361-ff8531-ffa600/>\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create data frame for map\n\nx_ax <- c(550, 486, 452, 463, 516, 584, 637, 648, 614)\ny_ax <- c(450, 473, 533, 600, 644, 644, 600, 533, 473)\n# categories\ncat <- c(\"Behavioral\\nHealth\\nServices\", \"Substance Use\\nTreatment\", \"Housing\\nAssistance\", \"Healthcare\\nServices\", \n         \"Community\\n Policing\\nInitiatives\", \n         \"Legal Aid &\\nAdvocacy\", \"Legal Diversion\\nSupports\", \"Reentry\\n Support\", \"Community\\nEngagement and\\nAwareness\" )\n\ncols <- c(\"#003f5c\",  \"#2c4875\", \"#58508d\", \"#8a508f\", \"#bc5090\", \"#de5a79\", \"#ff6361\", \"#ff8531\", \"#ffa600\")\n# Urls\nurls <- c(\"http://google.com\", \"https://stackoverflow.com\", \"http://google.com\", \"https://stackoverflow.com\", \"http://google.com\",\n          \"https://stackoverflow.com\", \"http://google.com\", \"https://stackoverflow.com\", \"http://google.com\")\n\na_map <- data.frame(x_ax, y_ax, cols, cat, urls)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Add values for circle co-ordinates and colors to the data frame\n\na_map <- a_map %>% \n  mutate(\n    x0 = x_ax - 30,\n    x1 = x_ax + 30,\n    y0 = y_ax - 30,\n    y1 = y_ax + 30,\n    x0_d = x0 - 3,\n    x1_d = x1 - 3,\n    y0_d = y0 - 3,\n    y1_d = y1 - 3,\n  )\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# add values for circles to list\nlarge_list <- list()\nlarge_list <- by(a_map, seq_len(nrow(a_map)), function(r){\n  x_0 <- as.numeric(r[\"x0\"])\n  x_1 <- as.numeric(r[\"x1\"])\n  y_0 <- as.numeric(r[\"y0\"])\n  y_1 <- as.numeric(r[\"y1\"])\n  co <- as.character(r[\"cols\"])\n  \ns_list <- list(type = 'circle',\n               xref = 'x', x0 = x_0, x1 = x_1,\n               yref = 'y', y0 = y_0, y1 = y_1,\n               fillcolor = co, line = list(color = co),\n               opacity = 0.9,\n               layer=\"below\")\nlarge_list <- append(large_list, s_list)\n\n}\n  )\n\nlarge_list <- unname(large_list)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Add drop shadow\ndrop_shadow_list <- list()\n\ndrop_shadow_list <- by(a_map, seq_len(nrow(a_map)), function(r){\n  x_0_d <- as.numeric(r[\"x0_d\"])\n  x_1_d <- as.numeric(r[\"x1_d\"])\n  y_0_d <- as.numeric(r[\"y0_d\"])\n  y_1_d <- as.numeric(r[\"y1_d\"])\n  co <- as.character(r[\"cols\"])\n  \ns_list <- list(type = 'circle',\n               xref = 'x', x0 = x_0_d, x1 = x_1_d,\n               yref = 'y', y0 = y_0_d, y1 = y_1_d,\n               fillcolor = co, line = list(color = co),\n               opacity = 0.30,\n               layer=\"below\")\ndrop_shadow_list <- append(drop_shadow_list, s_list)\n\n}\n  )\n\ndrop_shadow_list <- unname(drop_shadow_list)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nshape_list <- list()\nfor(i in drop_shadow_list){\n  shape_list <- append(large_list, drop_shadow_list)\n}\n```\n:::\n\n\n\n<https://stackoverflow.com/questions/56084819/open-link-on-datapoint-click-with-plotly-in-r-shiny>\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nurls <- c(\"http://google.com\", \"https://stackoverflow.com\")\n\np <- plot_ly(a_map, type = \"scatter\", mode = \"text\",\n             text = ~cat, textposition = \"middle center\",\n             textfont = list(color = '#fff', size = 13),\n             x = ~ x_ax, y = ~y_ax, \n             customdata = ~ urls) %>%\n  # Remove hover info\n  style(hoverinfo = 'none') %>%\n  \n  # Layout\n  layout(xaxis = list(zerolinecolor = '#ffff',\n                      zerolinewidth = 2,\n                      gridcolor = 'ffff',\n                      range = list(415, 710), showgrid = F,\n                      showticklabels = FALSE,\n                      title = FALSE,\n                      fixedrange = TRUE\n                      ),\n         yaxis = list(\n                     zerolinecolor = '#ffff',\n                     zerolinewidth = 2,\n                     gridcolor = 'ffff',\n                     range = list(400, 700), showgrid = F,\n                     showticklabels = FALSE,\n                     title = FALSE,\n                     fixedrange = TRUE),\n         shapes = shape_list,\n         showlegend = F\n         )\n\n# Disable modebar\np <- config(p, displayModeBar = FALSE)\n\njs <- \"\nfunction(el, x) {\n  el.on('plotly_click', function(d) {\n    var point = d.points[0];\n    var url = point.data.customdata[point.pointIndex];\n    window.open(url);\n  })\n}\"\n\np %>% onRender(js)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-2cef99915d6fd342fb97\" style=\"width:200%;height:200%;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-2cef99915d6fd342fb97\">{\"x\":{\"visdat\":{\"b37021567d63\":[\"function () \",\"plotlyVisDat\"]},\"cur_data\":\"b37021567d63\",\"attrs\":{\"b37021567d63\":{\"mode\":\"text\",\"text\":{},\"textposition\":\"middle center\",\"textfont\":{\"color\":\"#fff\",\"size\":13},\"x\":{},\"y\":{},\"customdata\":{},\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"type\":\"scatter\"}},\"layout\":{\"margin\":{\"b\":40,\"l\":60,\"t\":25,\"r\":10},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"title\":false,\"zerolinecolor\":\"#ffff\",\"zerolinewidth\":2,\"gridcolor\":\"ffff\",\"range\":[415,710],\"showgrid\":false,\"showticklabels\":false,\"fixedrange\":true},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"title\":false,\"zerolinecolor\":\"#ffff\",\"zerolinewidth\":2,\"gridcolor\":\"ffff\",\"range\":[400,700],\"showgrid\":false,\"showticklabels\":false,\"fixedrange\":true},\"hovermode\":\"closest\",\"showlegend\":false,\"shapes\":[{\"type\":\"circle\",\"xref\":\"x\",\"x0\":520,\"x1\":580,\"yref\":\"y\",\"y0\":420,\"y1\":480,\"fillcolor\":\"#003f5c\",\"line\":{\"color\":\"#003f5c\"},\"opacity\":0.90000000000000002,\"layer\":\"below\"},{\"type\":\"circle\",\"xref\":\"x\",\"x0\":456,\"x1\":516,\"yref\":\"y\",\"y0\":443,\"y1\":503,\"fillcolor\":\"#2c4875\",\"line\":{\"color\":\"#2c4875\"},\"opacity\":0.90000000000000002,\"layer\":\"below\"},{\"type\":\"circle\",\"xref\":\"x\",\"x0\":422,\"x1\":482,\"yref\":\"y\",\"y0\":503,\"y1\":563,\"fillcolor\":\"#58508d\",\"line\":{\"color\":\"#58508d\"},\"opacity\":0.90000000000000002,\"layer\":\"below\"},{\"type\":\"circle\",\"xref\":\"x\",\"x0\":433,\"x1\":493,\"yref\":\"y\",\"y0\":570,\"y1\":630,\"fillcolor\":\"#8a508f\",\"line\":{\"color\":\"#8a508f\"},\"opacity\":0.90000000000000002,\"layer\":\"below\"},{\"type\":\"circle\",\"xref\":\"x\",\"x0\":486,\"x1\":546,\"yref\":\"y\",\"y0\":614,\"y1\":674,\"fillcolor\":\"#bc5090\",\"line\":{\"color\":\"#bc5090\"},\"opacity\":0.90000000000000002,\"layer\":\"below\"},{\"type\":\"circle\",\"xref\":\"x\",\"x0\":554,\"x1\":614,\"yref\":\"y\",\"y0\":614,\"y1\":674,\"fillcolor\":\"#de5a79\",\"line\":{\"color\":\"#de5a79\"},\"opacity\":0.90000000000000002,\"layer\":\"below\"},{\"type\":\"circle\",\"xref\":\"x\",\"x0\":607,\"x1\":667,\"yref\":\"y\",\"y0\":570,\"y1\":630,\"fillcolor\":\"#ff6361\",\"line\":{\"color\":\"#ff6361\"},\"opacity\":0.90000000000000002,\"layer\":\"below\"},{\"type\":\"circle\",\"xref\":\"x\",\"x0\":618,\"x1\":678,\"yref\":\"y\",\"y0\":503,\"y1\":563,\"fillcolor\":\"#ff8531\",\"line\":{\"color\":\"#ff8531\"},\"opacity\":0.90000000000000002,\"layer\":\"below\"},{\"type\":\"circle\",\"xref\":\"x\",\"x0\":584,\"x1\":644,\"yref\":\"y\",\"y0\":443,\"y1\":503,\"fillcolor\":\"#ffa600\",\"line\":{\"color\":\"#ffa600\"},\"opacity\":0.90000000000000002,\"layer\":\"below\"},{\"type\":\"circle\",\"xref\":\"x\",\"x0\":517,\"x1\":577,\"yref\":\"y\",\"y0\":417,\"y1\":477,\"fillcolor\":\"#003f5c\",\"line\":{\"color\":\"#003f5c\"},\"opacity\":0.29999999999999999,\"layer\":\"below\"},{\"type\":\"circle\",\"xref\":\"x\",\"x0\":453,\"x1\":513,\"yref\":\"y\",\"y0\":440,\"y1\":500,\"fillcolor\":\"#2c4875\",\"line\":{\"color\":\"#2c4875\"},\"opacity\":0.29999999999999999,\"layer\":\"below\"},{\"type\":\"circle\",\"xref\":\"x\",\"x0\":419,\"x1\":479,\"yref\":\"y\",\"y0\":500,\"y1\":560,\"fillcolor\":\"#58508d\",\"line\":{\"color\":\"#58508d\"},\"opacity\":0.29999999999999999,\"layer\":\"below\"},{\"type\":\"circle\",\"xref\":\"x\",\"x0\":430,\"x1\":490,\"yref\":\"y\",\"y0\":567,\"y1\":627,\"fillcolor\":\"#8a508f\",\"line\":{\"color\":\"#8a508f\"},\"opacity\":0.29999999999999999,\"layer\":\"below\"},{\"type\":\"circle\",\"xref\":\"x\",\"x0\":483,\"x1\":543,\"yref\":\"y\",\"y0\":611,\"y1\":671,\"fillcolor\":\"#bc5090\",\"line\":{\"color\":\"#bc5090\"},\"opacity\":0.29999999999999999,\"layer\":\"below\"},{\"type\":\"circle\",\"xref\":\"x\",\"x0\":551,\"x1\":611,\"yref\":\"y\",\"y0\":611,\"y1\":671,\"fillcolor\":\"#de5a79\",\"line\":{\"color\":\"#de5a79\"},\"opacity\":0.29999999999999999,\"layer\":\"below\"},{\"type\":\"circle\",\"xref\":\"x\",\"x0\":604,\"x1\":664,\"yref\":\"y\",\"y0\":567,\"y1\":627,\"fillcolor\":\"#ff6361\",\"line\":{\"color\":\"#ff6361\"},\"opacity\":0.29999999999999999,\"layer\":\"below\"},{\"type\":\"circle\",\"xref\":\"x\",\"x0\":615,\"x1\":675,\"yref\":\"y\",\"y0\":500,\"y1\":560,\"fillcolor\":\"#ff8531\",\"line\":{\"color\":\"#ff8531\"},\"opacity\":0.29999999999999999,\"layer\":\"below\"},{\"type\":\"circle\",\"xref\":\"x\",\"x0\":581,\"x1\":641,\"yref\":\"y\",\"y0\":440,\"y1\":500,\"fillcolor\":\"#ffa600\",\"line\":{\"color\":\"#ffa600\"},\"opacity\":0.29999999999999999,\"layer\":\"below\"}]},\"source\":\"A\",\"config\":{\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false,\"displayModeBar\":false},\"data\":[{\"mode\":\"text\",\"text\":[\"Behavioral<br />Health<br />Services\",\"Substance Use<br />Treatment\",\"Housing<br />Assistance\",\"Healthcare<br />Services\",\"Community<br /> Policing<br />Initiatives\",\"Legal Aid &<br />Advocacy\",\"Legal Diversion<br />Supports\",\"Reentry<br /> Support\",\"Community<br />Engagement and<br />Awareness\"],\"textposition\":[\"middle center\",\"middle center\",\"middle center\",\"middle center\",\"middle center\",\"middle center\",\"middle center\",\"middle center\",\"middle center\"],\"textfont\":{\"color\":\"#fff\",\"size\":13},\"x\":[550,486,452,463,516,584,637,648,614],\"y\":[450,473,533,600,644,644,600,533,473],\"customdata\":[\"http://google.com\",\"https://stackoverflow.com\",\"http://google.com\",\"https://stackoverflow.com\",\"http://google.com\",\"https://stackoverflow.com\",\"http://google.com\",\"https://stackoverflow.com\",\"http://google.com\"],\"type\":\"scatter\",\"marker\":{\"color\":\"rgba(31,119,180,1)\",\"line\":{\"color\":\"rgba(31,119,180,1)\"}},\"error_y\":{\"color\":\"rgba(31,119,180,1)\"},\"error_x\":{\"color\":\"rgba(31,119,180,1)\"},\"line\":{\"color\":\"rgba(31,119,180,1)\"},\"xaxis\":\"x\",\"yaxis\":\"y\",\"frame\":null,\"hoverinfo\":\"none\"}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":{\"render\":[{\"code\":\"\\nfunction(el, x) {\\n  el.on('plotly_click', function(d) {\\n    var point = d.points[0];\\n    var url = point.data.customdata[point.pointIndex];\\n    window.open(url);\\n  })\\n}\",\"data\":null}]}}</script>\n```\n\n:::\n:::\n\n\nPlay with text size, color etc:\n<https://plotly.com/r/text-and-annotations/>\n\nCo-ordinates for nonagon:\n<https://www.mathopenref.com/coordpolycalc.html>\n\nSee if this can be done in the css:\n<https://stackoverflow.com/questions/36326683/d3-js-how-can-i-set-the-cursor-to-hand-when-mouseover-these-elements-on-svg-co>\n<https://community.plotly.com/t/change-the-cursor-to-pointer-default-when-hover-over-graph/15502>\n\n\nJS soultion:\n<https://community.plotly.com/t/cursor-pointer-style/2237>\nIf not, consider image maps:\n<https://www.w3schools.com/html/html_images_imagemap.asp>\n\n\n\n",
    "supporting": [
      "asset_map_overview_visual_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"site_libs/plotly-binding-4.10.4/plotly.js\"></script>\n<script src=\"site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<script src=\"site_libs/jquery-3.5.1/jquery.min.js\"></script>\n<link href=\"site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n<link href=\"site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}